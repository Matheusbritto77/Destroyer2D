import{q as $,s as J,e as Q,o as Z,a as c,t as D}from"./app-BkCPOx7D.js";const tt={class:"relative w-full h-screen bg-black text-white overflow-hidden"},et={class:"absolute top-0 left-0 w-full text-center z-10 p-4 bg-gradient-to-b from-black/70 to-transparent"},st={class:"text-lg"},it={class:"mr-6"},lt={class:"mr-6"},ot=800,nt=15,ht=20,rt={__name:"Game",setup(at){const i=$({level:1,phase:"basic",score:0,health:500,bossDefeated:!1,phaseStartTime:Date.now()});let x=0,g=0,y=0,l,h,s,d=[],a=[],r=[],p={},S=0;J(()=>{A(),R(),T(),_(),M()});function A(){l=document.getElementById("gameCanvas"),h=l.getContext("2d"),l.width=window.innerWidth,l.height=window.innerHeight}function R(){s={x:l.width/2-15,y:l.height-60,width:30,height:30,speed:10}}function _(){let t=!1;const e=120;l.addEventListener("touchstart",o=>{t=!0,o.preventDefault()},{passive:!1}),l.addEventListener("touchmove",o=>{if(!t)return;const n=o.touches[0],f=l.getBoundingClientRect(),u=n.clientX-f.left,w=n.clientY-f.top-e,m=u-(s.x+s.width/2),b=w-(s.y+s.height/2),E=Math.sqrt(m*m+b*b),B=Math.min(E,s.speed),L=m/E,k=b/E;!isNaN(L)&&!isNaN(k)&&(s.x+=L*B,s.y+=k*B),s.x=Math.max(0,Math.min(l.width-s.width,s.x)),s.y=Math.max(0,Math.min(l.height-s.height,s.y)),o.preventDefault()},{passive:!1}),l.addEventListener("touchend",()=>{t=!1})}function T(){window.addEventListener("keydown",t=>p[t.key]=!0),window.addEventListener("keyup",t=>{p[t.key]=!1})}function M(){h.clearRect(0,0,l.width,l.height),N(),O(),requestAnimationFrame(M)}function N(){H(),Y(),q(),X(),j(),W()}function O(){F(),I(),V(),K()}function H(){p.ArrowLeft&&s.x>0&&(s.x-=s.speed),p.ArrowRight&&s.x<l.width-s.width&&(s.x+=s.speed),p.ArrowUp&&s.y>0&&(s.y-=s.speed),p.ArrowDown&&s.y<l.height-s.height&&(s.y+=s.speed),G()}function G(){if(y>0){y--;return}if(g>0){g--;return}d.push({x:s.x+s.width/2-2,y:s.y,width:5,height:30,speed:i.level>1?10+i.level*.2:10}),x++,g=5,x>=10&&(x=0,y=i.level>1?15-i.level*.2:15)}function Y(){d=d.filter(t=>t.y>0),d.forEach(t=>t.y-=t.speed)}function q(){r=r.filter(t=>t.y<l.height),r.forEach(t=>t.y+=t.speed)}function X(){a=a.filter(e=>e.y<l.height);const t=i.level;a.forEach(e=>{e.y+=e.speed,e.type==="medium"&&(e.x+=Math.sin(e.y/100)*2,e.x=Math.max(0,Math.min(l.width-e.width,e.x))),e.type==="boss"&&t>=1&&P(e,t);const o=.002+t*1e-4;(e.type==="medium"||e.type==="basic")&&Math.random()<o&&r.push({x:e.x+e.width/2-2,y:e.y+e.height,width:7,height:10,speed:10+t*.2})})}function P(t,e){(t.x<=0||t.x+t.width>=l.width)&&(t.speed*=-1),t.y+t.height>=l.height&&(t.speed*=-1,t.y=l.height-t.height),t.y<=0&&(t.y=0),t.x+=t.speed,t.y<0&&t.y+t.height>0&&(t.y+=2);const o=.02+e*.001;Math.random()<o&&U(t)}function U(t){[{x:-1,y:-1},{x:1,y:-1},{x:-1,y:1},{x:1,y:1},{x:0,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1}].forEach(o=>{r.push({x:t.x+t.width/2-2,y:t.y+t.height/2,width:4,height:10,speed:2+i.level*.2,dx:o.x,dy:o.y})})}function W(){const t=Date.now();if(t-S<ot||a.length>=10)return;const e=i.level,o=(t-i.phaseStartTime)/1e3,n=30+e*15,f=1.5+e*.2,u=10+e*5;o>=30&&i.phase!=="boss"&&(i.phase=i.phase==="basic"?"medium":"boss",i.phaseStartTime=t),i.phase==="basic"?v("basic",50,20,f,n,u):i.phase==="medium"?v("medium",80,25,f*1.2,n*1.5,u*1.2):i.phase==="boss"&&!i.bossDefeated&&!a.find(w=>w.type==="boss")&&v("boss",500,100,.6+e*.1,n*10,u*3,l.width/2-100),S=t}function v(t,e,o,n,f,u,w=Math.random()*(l.width-e)){a.push({x:w,y:0,width:e,height:o,speed:n,health:f,maxHealth:f,damage:u,type:t})}function j(){for(let t=d.length-1;t>=0;t--){const e=d[t];for(let o=a.length-1;o>=0;o--){const n=a[o];if(C(e,n)){n.health-=ht,d.splice(t,1),n.health<=0&&(a.splice(o,1),i.score+=n.type==="boss"?100:10,n.type==="boss"&&(i.bossDefeated=!0,z()));break}}}for(let t=r.length-1;t>=0;t--){const e=r[t];C(e,s)&&(r.splice(t,1),i.health-=nt,i.health<=0&&Swal.fire({icon:"error",title:"ðŸ’€ Game Over!",text:`Seu score: ${i.score}`,confirmButtonText:"RecomeÃ§ar",allowOutsideClick:!1,allowEscapeKey:!1}).then(()=>{location.reload()}))}for(let t=a.length-1;t>=0;t--);}function C(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function z(){i.level++,i.health+=100,i.phase="basic",i.bossDefeated=!1,i.phaseStartTime=Date.now()}function F(){h.fillStyle="lime",h.fillRect(s.x,s.y,s.width,s.height)}function I(){h.fillStyle="red",d.forEach(t=>h.fillRect(t.x,t.y,t.width,t.height))}function K(){h.fillStyle="yellow",r.forEach(t=>h.fillRect(t.x,t.y,t.width,t.height))}function V(){a.forEach(t=>{h.fillStyle=t.type==="basic"?"red":t.type==="medium"?"orange":"purple",h.fillRect(t.x,t.y,t.width,t.height),h.fillStyle="green",h.fillRect(t.x,t.y-8,t.health/t.maxHealth*t.width,5)})}return(t,e)=>(Z(),Q("div",tt,[e[4]||(e[4]=c("canvas",{id:"gameCanvas",class:"w-full h-full"},null,-1)),c("div",et,[e[0]||(e[0]=c("br",null,null,-1)),e[1]||(e[1]=c("br",null,null,-1)),e[2]||(e[2]=c("br",null,null,-1)),e[3]||(e[3]=c("h1",{class:"text-4xl font-bold mb-2"},"ðŸš€ Destroyer 2D",-1)),c("div",st,[c("span",it,"Score: "+D(i.score),1),c("span",lt,"Level: "+D(i.level),1),c("span",null,"Health: "+D(i.health)+"%",1)])])]))}};export{rt as default};
