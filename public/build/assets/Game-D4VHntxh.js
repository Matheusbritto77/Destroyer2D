import{d as de,q as A,s as re,e as ce,o as fe,a as f,t as B}from"./app-h7cyfT1y.js";const ge={class:"relative w-full h-screen bg-black text-white overflow-hidden"},ue={class:"absolute top-0 left-0 w-full text-center z-10 p-4 bg-gradient-to-b from-black/70 to-transparent"},we={class:"text-lg"},pe={class:"mr-6"},me={class:"mr-6"},xe={class:"mr-6"},ve=800,ye=15,Me={__name:"Game",setup(be){const W=de(100),s=A({level:1,phase:"basic",score:0,health:500,bossDefeated:!1,phaseStartTime:Date.now()});let D=0,I=0,R=0,a,h,i,g=[],c=[],u=[],v={},C=0,w=[];const T=A({value:20});re(()=>{P(),N(),q(),O(),y()});let S=new Image;S.src="/storage/navs/basic.png",S.onload=()=>{console.log("Imagem da nave inimiga bÃ¡sica carregada com sucesso!")},S.onerror=()=>{console.error("Erro ao carregar a imagem da nave inimiga bÃ¡sica!")};let M=new Image;M.src="/storage/navs/medium.png",M.onload=()=>{console.log("Imagem da nave inimiga mÃ©dia carregada com sucesso!")},M.onerror=()=>{console.error("Erro ao carregar a imagem da nave inimiga mÃ©dia!")};let E=new Image;E.src="/storage/navs/boss.png",E.onload=()=>{console.log("Imagem da nave inimiga boss carregada com sucesso!")},E.onerror=()=>{console.error("Erro ao carregar a imagem da nave inimiga boss!")};function L(){W.value=Math.round(i.shield)}function P(){a=document.getElementById("gameCanvas"),h=a.getContext("2d"),window.innerWidth<=768?(a.width=window.innerWidth*.75,a.height=window.innerHeight*.75):(a.width=window.innerWidth,a.height=window.innerHeight),a.style.width=`${window.innerWidth}px`,a.style.height=`${window.innerHeight}px`}function N(){i={x:a.width/2-15,y:a.height-60,width:30,height:30,speed:10,shield:1e3,maxShield:1e3,image:new Image},i.image.src="/storage/navs/padraoplayer.png",i.image.onload=()=>{console.log("Imagem da nave carregada com sucesso!")}}function O(){let e=!1;const t=120;a.addEventListener("touchstart",l=>{e=!0,l.preventDefault()},{passive:!1}),a.addEventListener("touchmove",l=>{if(!e)return;const o=l.touches[0],n=a.getBoundingClientRect(),d=o.clientX-n.left,x=o.clientY-n.top-t,p=d-(i.x+i.width/2),r=x-(i.y+i.height/2),m=Math.sqrt(p*p+r*r),Y=Math.min(m,i.speed),X=p/m,_=r/m;!isNaN(X)&&!isNaN(_)&&(i.x+=X*Y,i.y+=_*Y),i.x=Math.max(0,Math.min(a.width-i.width,i.x)),i.y=Math.max(0,Math.min(a.height-i.height,i.y)),l.preventDefault()},{passive:!1}),a.addEventListener("touchend",()=>{e=!1})}function V(){T.value=20+(s.level-1)*5}function q(){window.addEventListener("keydown",e=>v[e.key]=!0),window.addEventListener("keyup",e=>{v[e.key]=!1})}function y(e){const o=1e3/(window.innerWidth<=768?30:60);y.lastTime||(y.lastTime=e),e-y.lastTime>=o&&(h.clearRect(0,0,a.width,a.height),b(),F(),y.lastTime=e),requestAnimationFrame(y)}function b(){G(),j(),z(),K(),Z(),L(),te(),ee();const e=Date.now();b.lastBonusSpawn||(b.lastBonusSpawn=0);const n=Math.max(2e3,1e4-200*(s.level+1));e-b.lastBonusSpawn>n&&(Q(),b.lastBonusSpawn=e)}function F(){se(),ae(),oe(),ne(),he()}function G(){v.ArrowLeft&&i.x>0&&(i.x-=i.speed),v.ArrowRight&&i.x<a.width-i.width&&(i.x+=i.speed),v.ArrowUp&&i.y>0&&(i.y-=i.speed),v.ArrowDown&&i.y<a.height-i.height&&(i.y+=i.speed),$()}function $(){if(R>0){R--;return}if(I>0){I--;return}g.push({x:i.x+i.width/2-2,y:i.y,width:5,height:30,speed:s.level>1?10+s.level*.2:10}),D++,I=5,D>=10&&(D=0,R=s.level>1?15-s.level*.2:15)}function j(){g=g.filter(e=>e.y>0),g.forEach(e=>e.y-=e.speed)}function z(){u=u.filter(e=>e.y<a.height),u.forEach(e=>e.y+=e.speed)}function K(){c=c.filter(t=>t.y<a.height);const e=s.level;c.forEach(t=>{if(t.y+=t.speed,t.type==="medium"){const o=t.moveFrequency||.03,n=t.moveAmplitude||20,d=t.movePhase||0;t.x+=Math.sin(t.y*o+d)*(n*.05),t.x=Math.max(0,Math.min(a.width-t.width,t.x))}t.type==="boss"&&e>=1&&U(t,e);const l=.02+e*.02;(t.type==="medium"||t.type==="basic")&&Math.random()<l&&u.push({x:t.x+t.width/2-2,y:t.y+t.height,width:7,height:10,speed:5+e*.5})})}function U(e,t){const l=window.innerWidth<=768,o=e.originalWidth||e.width,n=e.originalHeight||e.height;e.originalWidth||(e.originalWidth=e.width),e.originalHeight||(e.originalHeight=e.height),l?(e.width=o/2,e.height=n/2):(e.width=o,e.height=n);const d=window.innerWidth,x=window.innerHeight;a.width=Math.min(a.width,d),a.height=Math.min(a.height,x);const p=a.width,r=a.height;e.x<=0?(e.x=0,e.speed=Math.abs(e.speed)):e.x+e.width>=p&&(e.x=p-e.width,e.speed=-Math.abs(e.speed)),e.y+e.height>=r&&(e.y=r-e.height),e.y<0&&(e.y=0),e.x+=e.speed,e.y<0&&e.y+e.height>0&&(e.y+=2);const m=.04+t*.01;Math.random()<m&&J(e)}function J(e){[{offsetX:0,offsetY:0,dx:-1,dy:-1},{offsetX:e.width,offsetY:0,dx:1,dy:-1},{offsetX:0,offsetY:e.height,dx:-1,dy:1},{offsetX:e.width,offsetY:e.height,dx:1,dy:1},{offsetX:e.width/2,offsetY:0,dx:0,dy:-1},{offsetX:0,offsetY:e.height/2,dx:-1,dy:0},{offsetX:e.width,offsetY:e.height/2,dx:1,dy:0},{offsetX:e.width/2,offsetY:e.height,dx:0,dy:1}].forEach(l=>{u.push({x:e.x+l.offsetX-2,y:e.y+l.offsetY-5,width:4,height:10,speed:2+s.level*.2,dx:l.dx,dy:l.dy})})}function Q(){if(w.length>=3)return;const e=45,t=45,l=Math.random()*(a.width-e),o=-45,n=Math.random()<.5?"health":"shield",d=[1,2,3,4,5,6,7,8,9,10][Math.floor(Math.random()*10)];w.push({x:l,y:o,width:e,height:t,speed:2,type:n,multiplier:d,value:10,collected:!1})}function Z(){w=w.filter(e=>e.y<a.height&&!e.collected),w.forEach(e=>{e.y+=e.speed})}function ee(){const e=Date.now();if(e-C<ve||c.length>=10)return;const t=s.level,l=(e-s.phaseStartTime)/1e3,o=30+t*15,n=1.5+t*.5,d=10+t*5;l>=30&&s.phase!=="boss"&&(s.phase=s.phase==="basic"?"medium":"boss",s.phaseStartTime=e),s.phase==="basic"?k("basic",50,20,n,o,d):s.phase==="medium"?k("medium",80,25,n*1.2,o*1.5,d*1.2):s.phase==="boss"&&!s.bossDefeated&&!c.find(x=>x.type==="boss")&&k("boss",500,100,.6+t*.1,o*10,d*3,a.width/2-100),C=e}function k(e,t,l,o,n,d,x=Math.random()*(a.width-t)){let p=0,r=0;e==="medium"?(r=30+s.level*20,p=r):e==="boss"&&(r=150+s.level*50,p=r);const m={x,y:0,width:t,height:l,speed:o,health:n,maxHealth:n,damage:d,type:e,shield:p,maxShield:r};e==="basic"?m.image=S:e==="medium"?m.image=M:e==="boss"&&(m.image=E),c.push(m)}function te(){for(let e=g.length-1;e>=0;e--){const t=g[e];for(let l=w.length-1;l>=0;l--){const o=w[l];if(H(t,o)){ie(o),w.splice(l,1),g.splice(e,1);break}}for(let l=c.length-1;l>=0;l--){const o=c[l];if(H(t,o)){let n=T.value;o.shield>0&&(o.shield>=n?(o.shield-=n,n=0):(n-=o.shield,o.shield=0)),n>0&&(o.health-=n),g.splice(e,1),o.health<=0&&(c.splice(l,1),s.score+=o.type==="boss"?100:10,o.type==="boss"&&(s.bossDefeated=!0,le()));break}}}for(let e=u.length-1;e>=0;e--){const t=u[e];if(H(t,i)){u.splice(e,1);let l=ye;i.shield>0&&(i.shield>=l?(i.shield-=l,l=0):(l-=i.shield,i.shield=0)),l>0&&(s.health-=l),s.health<=0&&Swal.fire({icon:"error",title:"ðŸ’€ Game Over!",text:`Seu score: ${s.score}`,confirmButtonText:"RecomeÃ§ar",allowOutsideClick:!1,allowEscapeKey:!1}).then(()=>{location.reload()})}}for(let e=c.length-1;e>=0;e--);}function H(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function ie(e){const t=e.value*e.multiplier;e.type==="health"?s.health=Math.min(s.health+t,1e3):e.type==="shield"&&(i.shield=Math.min(i.shield+t,i.maxShield),L())}function le(){s.level++,s.health+=100,s.phase="basic",s.bossDefeated=!1,s.phaseStartTime=Date.now(),V()}function se(){i.image.complete?h.drawImage(i.image,i.x,i.y,i.width,i.height):(h.fillStyle="lime",h.fillRect(i.x,i.y,i.width,i.height)),i.maxShield>0&&(h.fillStyle="gray",h.fillRect(i.x,i.y-12,i.width,6),h.fillStyle="deepskyblue",h.fillRect(i.x,i.y-12,i.shield/i.maxShield*i.width,6));const e=500;h.fillStyle="gray",h.fillRect(i.x,i.y-6,i.width,6),h.fillStyle="green",h.fillRect(i.x,i.y-6,s.health/e*i.width,6)}function ae(){g.length!==0&&(h.fillStyle="red",g.forEach(e=>h.fillRect(e.x,e.y,e.width,e.height)))}function oe(){u.length!==0&&(h.fillStyle="yellow",u.forEach(e=>h.fillRect(e.x,e.y,e.width,e.height)))}function he(){w.length!==0&&w.forEach(e=>{h.fillStyle=e.type==="health"?"green":"deepskyblue",h.fillRect(e.x,e.y,e.width,e.height),h.fillStyle="white",h.font="16px Arial",h.fillText("x"+e.multiplier,e.x+5,e.y+18)})}function ne(){const e=window.innerWidth<=768;c.forEach(t=>{e&&t.type==="boss"&&(t.width=t.originalWidth?t.originalWidth/2:t.width/2,t.height=t.originalHeight?t.originalHeight/2:t.height/2),t.image&&t.image.complete?h.drawImage(t.image,t.x,t.y,t.width,t.height):(h.fillStyle=t.type==="basic"?"red":t.type==="medium"?"orange":"purple",h.fillRect(t.x,t.y,t.width,t.height)),t.maxShield>0&&(h.fillStyle="gray",h.fillRect(t.x,t.y-16,t.width,5),h.fillStyle="lightblue",h.fillRect(t.x,t.y-16,t.shield/t.maxShield*t.width,5)),h.fillStyle="green",h.fillRect(t.x,t.y-8,t.health/t.maxHealth*t.width,5)})}return(e,t)=>(fe(),ce("div",ge,[t[4]||(t[4]=f("canvas",{id:"gameCanvas",class:"w-full h-full"},null,-1)),f("div",ue,[t[0]||(t[0]=f("br",null,null,-1)),t[1]||(t[1]=f("br",null,null,-1)),t[2]||(t[2]=f("br",null,null,-1)),t[3]||(t[3]=f("h1",{class:"text-4xl font-bold mb-2"},"ðŸš€ Destroyer 2D",-1)),f("div",we,[f("span",pe,"Score: "+B(s.score),1),f("span",me,"Level: "+B(s.level),1),f("span",xe,"Shield: "+B(W.value)+"%",1),f("span",null,"Health: "+B(s.health)+"%",1)])])]))}};export{Me as default};
